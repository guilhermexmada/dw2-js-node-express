<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisão Node.js</title>
</head>
<body>
    <h1 style="text-align: center;">The Movies</h1>
    <hr>

    <!-- Formulário de cadastro -->
    <div class="container">
        <h1>Cadastrar novo filme</h1>
        <form action="/filmes/new" method="POST"> <!-- destino dos dados do form usando POST -->
            <label for="titulo"></label>
            <input type="text" name="titulo">
            <label for="genero"></label>
            <input type="text" name="genero">
            <label for="duracao"></label>
            <input type="number" name="duracao">
        </form>
    </div>

    <table>
        <thead>
            <th style="width: 150px; text-align: left;">Título</th>
            <th style="width: 150px; text-align: left;">Gênero</th>
            <th style="width: 150px; text-align: left;">Duração</th>
            <th style="width: 150px; text-align: left;">Ações</th>
        </thead>
        <tbody>
            <!-- loop que exibe os dados da tabela -->
            <% filmes.forEach(filme => { %> 
                <tr>
                    <td><%= filme.titulo  %></td>
                    <td><%= filme.genero  %></td>
                    <td><%= filme.duracao  %></td>
                    <!-- botão de exclusão -->
                    <td>
                        <!-- rota de exclusão carregando ID como parâmetro -->
                        <a href="/filmes/delete/<%= filme.id %>"> 
                            <button onclick="return confirm('Deseja mesmo excluir o filme <%= filme.titulo %> ?')">
                                Excluir
                            </button>
                        </a>
                    </td>
                    <td>
                        <a href="/filmes/update/<%= filme.id %>">
                            <button>
                                Editar
                            </button>
                        </a>
                    </td>
                </tr>
          <%  }) %>
        </tbody>
    </table>

    <footer style="text-align: center;">
        <hr>
        The Movies &copy; 2025
    </footer>
</body>
</html>